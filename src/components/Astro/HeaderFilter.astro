---
import { detectLanguage } from '@/utils/i18n';
//import LanguageSwitcher from './LanguageSwitcher.astro';
import UserProfile from '@/components/React/Header/UserProfile';
import SearchContainer from '../React/Search/SearchContainer';
import { Icon } from 'astro-icon/components';
import RoleBasedAction from '../React/Header/RoleBasedAction';

const lang = detectLanguage(Astro.request.headers, new URL(Astro.request.url));
---

<header
  class="sticky inset-x-0 top-0 z-50 flex items-center bg-[var(--color-base-150)]"
>
  <nav
    class="flex min-h-16 w-full px-4 py-3 sm:px-8 md:px-12 lg:px-16 xl:px-20"
  >
    <!-- Logo -->
    <div class="flex items-center justify-center px-1">
      <a href="/" class="flex items-center gap-2 md:hidden">
        <Icon name="chevron-left" class="text-neutral h-5 w-5" />
      </a>
      <a href="/" class="hidden items-center gap-2 md:flex">
        <Icon name="isotipo" class="isotipo-only h-7 w-auto sm:h-8 md:h-9" />
        <Icon
          name="logotipo"
          class="logo-condensed hidden h-6 w-auto md:block"
        />
      </a>
    </div>
    <div class="flex flex-1 items-center justify-center">
      <div class="w-full max-w-full md:max-w-[90%] lg:max-w-[645px]">
        <SearchContainer
          client:load
          lang={lang}
          isCompactMode={true}
          isFilter={true}
        />
      </div>
    </div>
    <div class="hidden items-center justify-end gap-2 md:flex">
      <div class="hidden items-center gap-2 text-center md:flex">
        <RoleBasedAction client:load lang={lang} />
        <!-- <LanguageSwitcher /> -->
      </div>
      <UserProfile client:visible lang={lang} />
    </div>
  </nav>
</header>
