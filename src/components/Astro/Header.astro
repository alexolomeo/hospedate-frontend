---
import { detectLanguage } from '@/utils/i18n';
import UserProfile from '@/components/React/Header/UserProfile';
import SearchContainer from '../React/Search/SearchContainer';
import { Icon } from 'astro-icon/components';
import RoleBasedAction from '../React/Header/RoleBasedAction';
import CenterMenu from './Host/CenterMenu.astro';

interface Props {
  isSearch?: boolean;
  isFilter?: boolean;
  isCompactSearch?: boolean;
  isHosting?: boolean;
  isActions?: boolean;
  isProfile?: boolean;
}

const {
  isSearch = false,
  isFilter = false,
  isCompactSearch = false,
  isHosting = false,
  isActions = false,
  isProfile = true,
} = Astro.props;
const lang = detectLanguage(Astro.request.headers, new URL(Astro.request.url));
---

<header
  class="sticky inset-x-0 top-0 z-50 flex items-center bg-[var(--color-base-150)]"
>
  <nav
    class="flex min-h-16 w-full px-4 py-3 sm:px-8 md:px-12 lg:px-16 xl:px-20"
  >
    <!-- Logo -->
    <div class="flex items-center justify-center px-1">
      <a href="/" class="flex items-center gap-2">
        <Icon name="isotipo" class="isotipo-only h-7 w-auto sm:h-8 md:h-9" />
        <Icon
          name="logotipo"
          class="logo-condensed hidden h-6 w-auto md:block"
        />
      </a>
    </div>
    <div class="flex flex-1 items-center justify-center">
      {
        isHosting ? (
          <CenterMenu />
        ) : (
          (isSearch || isCompactSearch) && (
            <div class="w-full max-w-full md:max-w-[90%] lg:max-w-[645px]">
              <SearchContainer
                client:load
                lang={lang}
                isCompactMode={isCompactSearch}
                isFilter={isFilter}
              />
            </div>
          )
        )
      }
    </div>
    <div class="flex items-center justify-end gap-2">
      {
        isHosting ? (
          <div class="hidden items-center text-center md:flex">
            {/* TODO: Uncomment this section once the functionality is implemented */}
            {/* <HostMenu /> */}
            {/* <Notification /> */}
          </div>
        ) : (
          isActions && (
            <div class="hidden items-center gap-2 text-center md:flex">
              <RoleBasedAction client:load lang={lang} />
              {/* <LanguageSwitcher /> */}
            </div>
          )
        )
      }
      {
        isProfile && (
          <UserProfile client:visible lang={lang} viewHosting={isHosting} />
        )
      }
    </div>
  </nav>
</header>
