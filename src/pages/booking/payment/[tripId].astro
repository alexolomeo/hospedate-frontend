---
import { detectLanguage, getTranslation } from '@/utils/i18n';
import PaymentGateway from '@/components/React/Booking/PaymentGateway';
import ProtectedLayout from '@/layouts/ProtectedLayout.astro';

const lang = detectLanguage(Astro.request.headers, new URL(Astro.request.url));
const t = getTranslation(lang);
const title = t.booking.pageTitles.dashboard;
const { tripId } = Astro.params;

if (!tripId) {
  return new Response(null, { status: 404 });
}
---

<ProtectedLayout
  title={title}
  showFooter={false}
  requires={{ registerCompleted: true }}
>
  <div
    class="mx-auto max-w-4xl md:px-5 md:py-6 lg:max-w-4xl xl:max-w-6xl 2xl:max-w-7xl"
  >
    <PaymentGateway client:idle lang={lang} tripId={tripId} />
  </div>
</ProtectedLayout>
